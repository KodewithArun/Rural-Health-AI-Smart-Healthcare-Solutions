{% extends 'custom_admin/base.html' %} {% block breadcrumbs %}
<nav class="flex text-sm text-gray-600 mt-1">
  <a href="{% url 'custom_admin:dashboard' %}" class="hover:text-purple-600"
    >Dashboard</a
  >
  <span class="mx-2">/</span>
  <a
    href="{% url 'custom_admin:chat_history_list' %}"
    class="hover:text-purple-600"
    >Chats</a
  >
  <span class="mx-2">/</span>
  <span class="text-gray-800">#{{ chat.id }}</span>
</nav>
{% endblock %} {% block content %}

<div class="max-w-5xl mx-auto">
  <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
    <!-- Header -->
    <div class="flex items-center justify-between mb-6">
      <div>
        <h2 class="text-2xl font-bold text-gray-800">Chat Conversation</h2>
        <p class="text-sm text-gray-600 mt-1">
          {{ chat.timestamp|date:"F d, Y - g:i A" }}
        </p>
      </div>
      <div class="flex space-x-2">
        <a
          href="{% url 'custom_admin:chat_delete' chat.id %}"
          class="px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition font-medium"
        >
          <i class="ri-delete-bin-line mr-2"></i>Delete
        </a>
        <a
          href="{% url 'custom_admin:chat_history_list' %}"
          class="px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg transition font-medium"
        >
          <i class="ri-arrow-left-line mr-2"></i>Back
        </a>
      </div>
    </div>

    <!-- User Info -->
    <div class="bg-purple-50 border border-purple-200 rounded-lg p-4 mb-6">
      <div class="flex items-center space-x-4">
        <div
          class="w-14 h-14 bg-gradient-to-br from-purple-600 to-indigo-600 rounded-full flex items-center justify-center"
        >
          <span class="text-white font-bold text-lg"
            >{{ chat.user.first_name.0 }}{{ chat.user.last_name.0 }}</span
          >
        </div>
        <div class="flex-1">
          <h3 class="font-bold text-gray-800">{{ chat.user.get_full_name }}</h3>
          <p class="text-sm text-gray-600">
            @{{ chat.user.username }} â€¢ {{ chat.user.email }}
          </p>
          <a
            href="{% url 'custom_admin:user_detail' chat.user.id %}"
            class="text-sm text-purple-600 hover:text-purple-700 font-medium"
          >
            View Profile <i class="ri-arrow-right-line"></i>
          </a>
        </div>
        <div class="text-right">
          <p class="text-xs text-gray-500">Chat Time</p>
          <p class="text-sm font-semibold text-gray-800">
            {{ chat.timestamp|date:"g:i A" }}
          </p>
        </div>
      </div>
    </div>

    <!-- Conversation -->
    <div class="space-y-4 mb-6">
      <!-- User Question -->
      <div class="flex items-start space-x-3">
        <div
          class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0"
        >
          <i class="ri-user-line text-blue-600 text-xl"></i>
        </div>
        <div class="flex-1 bg-blue-50 border border-blue-200 rounded-lg p-4">
          <div class="flex items-center justify-between mb-2">
            <p class="text-sm font-semibold text-gray-800">
              {{ chat.user.get_full_name }}
            </p>
            <span class="text-xs text-gray-500">Question</span>
          </div>
          <p class="text-gray-700 whitespace-pre-wrap">{{ chat.question }}</p>
        </div>
      </div>

      <!-- AI Answer -->
      <div class="flex items-start space-x-3">
        <div
          class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0"
        >
          <i class="ri-robot-line text-green-600 text-xl"></i>
        </div>
        <div class="flex-1 bg-green-50 border border-green-200 rounded-lg p-4">
          <div class="flex items-center justify-between mb-2">
            <p class="text-sm font-semibold text-gray-800">AI Assistant</p>
            <span class="text-xs text-gray-500">Answer</span>
          </div>
          <p class="text-gray-700 whitespace-pre-wrap">{{ chat.answer }}</p>
        </div>
      </div>
    </div>

    <!-- Metadata -->
    <div class="bg-gray-50 rounded-lg p-4">
      <h3 class="font-semibold text-gray-800 mb-3">Conversation Metadata</h3>
      <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm">
        <div>
          <p class="text-gray-600">Chat ID</p>
          <p class="font-semibold text-gray-800">#{{ chat.id }}</p>
        </div>
        <div>
          <p class="text-gray-600">Date</p>
          <p class="font-semibold text-gray-800">
            {{ chat.timestamp|date:"M d, Y" }}
          </p>
        </div>
        <div>
          <p class="text-gray-600">Time</p>
          <p class="font-semibold text-gray-800">
            {{ chat.timestamp|date:"g:i A" }}
          </p>
        </div>
        <div>
          <p class="text-gray-600">User Role</p>
          <p class="font-semibold text-gray-800">{{ chat.user.role|title }}</p>
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock %}
