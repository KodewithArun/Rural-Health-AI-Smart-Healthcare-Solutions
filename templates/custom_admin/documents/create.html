{% extends 'custom_admin/base.html' %} {% load
custom_admin.templatetags.form_tags %} {% block breadcrumbs %}
<nav class="flex text-sm text-gray-600 mt-1">
  <a href="{% url 'custom_admin:dashboard' %}" class="hover:text-purple-600"
    >Dashboard</a
  >
  <span class="mx-2">/</span>
  <a href="{% url 'custom_admin:document_list' %}" class="hover:text-purple-600"
    >Documents</a
  >
  <span class="mx-2">/</span>
  <span class="text-gray-800">Upload Document</span>
</nav>
{% endblock %} {% block content %}

<div class="max-w-3xl mx-auto">
  <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
    <!-- Header -->
    <div class="mb-6">
      <h2 class="text-2xl font-bold text-gray-800">Upload New Document</h2>
      <p class="text-sm text-gray-600 mt-1">
        Add a new document to the knowledge base
      </p>
    </div>

    <!-- Upload Form -->
    <form method="post" enctype="multipart/form-data" class="space-y-6">
      {% csrf_token %}

      <!-- Title Field -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">
          Document Title <span class="text-red-600">*</span>
        </label>
        <input
          type="text"
          name="{{ form.title.name }}"
          value="{{ form.title.value|default:'' }}"
          required
          placeholder="Enter document title"
          class="w-full px-4 py-2 border {% if form.title.errors %}border-red-300{% else %}border-gray-300{% endif %} rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
        />
        {% if form.title.errors %}
        <p class="mt-1 text-sm text-red-600">{{ form.title.errors.0 }}</p>
        {% endif %}
      </div>

      <!-- File Upload -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">
          Document File <span class="text-red-600">*</span>
        </label>
        <div
          class="border-2 border-dashed {% if form.file.errors %}border-red-300{% else %}border-gray-300{% endif %} rounded-lg p-8 text-center hover:border-purple-400 transition"
        >
          <input
            type="file"
            name="{{ form.file.name }}"
            id="file-upload"
            required
            accept=".pdf,.doc,.docx,.txt"
            class="hidden"
          />
          <label for="file-upload" class="cursor-pointer">
            <i class="ri-upload-cloud-line text-5xl text-purple-600 mb-3"></i>
            <p class="text-gray-700 font-medium">
              Click to upload or drag and drop
            </p>
            <p class="text-sm text-gray-500 mt-1">
              PDF, DOC, DOCX, TXT (Max 10MB)
            </p>
          </label>
          <div
            id="file-name"
            class="mt-3 text-sm font-semibold text-purple-600"
          ></div>
        </div>
        {% if form.file.errors %}
        <p class="mt-1 text-sm text-red-600">{{ form.file.errors.0 }}</p>
        {% endif %}
      </div>

      <!-- Summary Field -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">
          Summary
        </label>
        <textarea
          name="{{ form.summary.name }}"
          rows="4"
          placeholder="Enter a brief summary of the document (optional)"
          class="w-full px-4 py-2 border {% if form.summary.errors %}border-red-300{% else %}border-gray-300{% endif %} rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
        >
{{ form.summary.value|default:'' }}</textarea
        >
        {% if form.summary.errors %}
        <p class="mt-1 text-sm text-red-600">{{ form.summary.errors.0 }}</p>
        {% endif %}
        <p class="mt-1 text-xs text-gray-500">
          Provide a brief description of the document content
        </p>
      </div>

      <!-- Info Box -->
      <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
        <div class="flex items-start space-x-3">
          <i class="ri-information-line text-blue-600 text-xl mt-0.5"></i>
          <div>
            <h4 class="font-semibold text-blue-800 mb-1">
              Document Processing
            </h4>
            <p class="text-sm text-blue-700">
              After upload, this document will be automatically processed and
              added to the AI knowledge base for better health assistance.
            </p>
          </div>
        </div>
      </div>

      <!-- Action Buttons -->
      <div
        class="flex items-center justify-end space-x-3 pt-4 border-t border-gray-200"
      >
        <a
          href="{% url 'custom_admin:document_list' %}"
          class="px-6 py-2.5 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition font-medium"
        >
          <i class="ri-close-line mr-2"></i>Cancel
        </a>
        <button
          type="submit"
          class="px-6 py-2.5 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition font-medium"
        >
          <i class="ri-upload-line mr-2"></i>Upload Document
        </button>
      </div>
    </form>
  </div>
</div>

{% endblock %} {% block extra_scripts %}
<script>
  document
    .getElementById("file-upload")
    .addEventListener("change", function (e) {
      const fileName = e.target.files[0]?.name;
      const fileNameDiv = document.getElementById("file-name");
      if (fileName) {
        fileNameDiv.textContent = "ðŸ“„ " + fileName;
      }
    });
</script>
{% endblock %}
