{% load static %}
<!-- Navigation -->
<nav class="nav-backdrop sticky top-0 z-50">
  <div class="max-w-8xl mx-auto px-4 sm:px-6 lg:px-14">
    <div class="flex justify-between items-center h-20">
      <!-- Logo Section -->
      <div class="flex items-center space-x-4">
        <div class="flex flex-col">
          <h1
            class="text-xl font-bold bg-gradient-to-r from-blue-600 to-indigo-700 bg-clip-text text-transparent"
          >
            Rural Health AI
          </h1>
          <span class="text-xs text-gray-500 font-medium hidden sm:block"
            >Smart Healthcare Solutions</span
          >
        </div>
      </div>

      <!-- Desktop Navigation -->
      <div class="hidden lg:flex items-center space-x-8">
        <a
          href="{% url 'home' %}"
          class="nav-link text-gray-700 hover:text-blue-600 font-medium py-2 px-1 flex items-center gap-2 transition-all duration-300 relative group"
        >
          <i class="ri-home-5-line text-lg"></i>
          <span>Home</span>
          <div
            class="absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-blue-500 to-indigo-600 transition-all duration-300 group-hover:w-full"
          ></div>
        </a>

        <a
          href="{% url 'chat:index' %}"
          class="nav-link text-gray-700 hover:text-blue-600 font-medium py-2 px-1 flex items-center gap-2 transition-all duration-300 relative group"
        >
          <i class="ri-chat-3-line text-lg"></i>
          <span> AI Chat </span>
          <div
            class="absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-blue-500 to-indigo-600 transition-all duration-300 group-hover:w-full"
          ></div>
        </a>

        <a
          href="{% url 'home' %}#awareness"
          class="nav-link text-gray-700 hover:text-blue-600 font-medium py-2 px-1 flex items-center gap-2 transition-all duration-300 relative group"
        >
          <i class="ri-information-line text-lg"></i>
          <span>Health Awareness</span>
          <div
            class="absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-blue-500 to-indigo-600 transition-all duration-300 group-hover:w-full"
          ></div>
        </a>

        <a
          href="{% url 'home' %}#services"
          class="nav-link text-gray-700 hover:text-blue-600 font-medium py-2 px-1 flex items-center gap-2 transition-all duration-300 relative group"
        >
          <i class="ri-stethoscope-line text-lg"></i>
          <span>Services</span>
          <div
            class="absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-blue-500 to-indigo-600 transition-all duration-300 group-hover:w-full"
          ></div>
        </a>

        <a
          href="{% url 'home' %}#contact"
          class="nav-link text-gray-700 hover:text-blue-600 font-medium py-2 px-1 flex items-center gap-2 transition-all duration-300 relative group"
        >
          <i class="ri-phone-line text-lg"></i>
          <span>Contact</span>
          <div
            class="absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-blue-500 to-indigo-600 transition-all duration-300 group-hover:w-full"
          ></div>
        </a>

        {% if user.is_authenticated %} {% if user.is_villager %}
        <a
          href="{% url 'appointments:create' %}"
          class="nav-link text-gray-700 hover:text-blue-600 font-medium py-2 px-1 flex items-center gap-2 transition-all duration-300 relative group"
        >
          <i class="ri-calendar-line text-lg"></i>
          <span>Book Appointment</span>
          <div
            class="absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-blue-500 to-indigo-600 transition-all duration-300 group-hover:w-full"
          ></div>
        </a>
        {% elif user.is_health_worker %}

        <a
          href="{% url 'accounts:health_worker_dashboard' %}"
          class="nav-link text-gray-700 hover:text-blue-600 font-medium py-2 px-1 flex items-center gap-2 transition-all duration-300 relative group"
        >
          <i class="ri-dashboard-line text-lg"></i>
          <span>Dashboard</span>
          <div
            class="absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-blue-500 to-indigo-600 transition-all duration-300 group-hover:w-full"
          ></div>
        </a>
        {% endif %} {% endif %}
      </div>

      <!-- Action Buttons --><!-- Action Buttons -->
      <!-- Action Buttons -->
      <div class="hidden md:flex items-center space-x-3">
        {% if user.is_authenticated %}

        <!-- User Dropdown -->
        <div class="relative inline-block text-left group">
          <button
            class="inline-flex justify-center items-center w-full px-4 py-2 bg-white border border-gray-300 rounded-lg shadow-sm hover:bg-gray-50 focus:outline-none"
          >
            <i class="ri-user-line text-lg mr-2"></i>
            <span class="font-medium text-gray-800">{{ user.username }}</span>
            <i class="ri-arrow-down-s-line ml-2"></i>
          </button>

          <!-- Dropdown Menu -->
          <div
            class="absolute right-0 mt-2 w-42 rounded-lg shadow-lg bg-gray-50 ring-1 ring-black ring-opacity-5 opacity-0 invisible group-hover:visible group-hover:opacity-100 transition-all duration-200"
          >
            <div class="py-1">
              {% if user.is_superadmin or user.is_admin %}
              <a
                href="{% url 'accounts:profile' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
              >
                Profile
              </a>

              <a
                href="{% url 'contact:my_enquiries' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
              >
                My Enquiries
              </a>

              {% else %}
              <a
                href="{% url 'accounts:profile' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
              >
                Profile
              </a>

              <a
                href="{% url 'appointments:list' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
              >
                My Appointments
              </a>

              <a
                href="{% url 'contact:my_enquiries' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
              >
                My Enquiries
              </a>

              <a
                href="{% url 'chat:chat_history' %}"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
              >
                Chat History
              </a>
              {% endif %}

              <form method="POST" action="{% url 'accounts:logout' %}">
                {% csrf_token %}
                <button
                  type="submit"
                  class="w-full text-left block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                >
                  Logout
                </button>
              </form>
            </div>
          </div>
        </div>

        {% else %}
        <!-- Login / Get Started -->
        <a
          href="{% url 'accounts:login' %}"
          class="text-blue-600 px-6 py-3 border border-blue-600 rounded-lg font-semibold shadow-lg flex items-center hover:bg-blue-50 transition-colors"
        >
          <i class="ri-rocket-line mr-2"></i>
          <span>Get Started</span>
        </a>
        {% endif %}
      </div>

      <!-- Mobile menu button -->
      <div class="lg:hidden flex items-center space-x-2">
        <button
          id="mobile-menu-btn"
          class="text-gray-700 hover:text-blue-600 transition-colors duration-300 p-2 rounded-xl hover:bg-gray-100"
        >
          <i class="ri-menu-3-line text-2xl mobile-menu-icon"></i>
          <i class="ri-close-line text-2xl mobile-close-icon hidden"></i>
        </button>
      </div>
    </div>
  </div>

  <!-- Mobile Navigation -->
  <div
    id="mobile-menu"
    class="lg:hidden hidden bg-white/95 backdrop-blur-lg border-t border-gray-200/50 shadow-lg"
  >
    <div class="px-6 py-4 space-y-3">
      <a
        href="{% url 'home' %}"
        class="flex items-center gap-3 px-4 py-3 text-gray-700 hover:text-blue-600 hover:bg-blue-50 rounded-xl transition-all duration-300 group"
      >
        <i
          class="ri-home-5-line text-lg group-hover:scale-110 transition-transform duration-300"
        ></i>
        <span class="font-medium">Home</span>
      </a>
      <a
        href="{% url 'chat:index' %}"
        class="flex items-center gap-3 px-4 py-3 text-gray-700 hover:text-blue-600 hover:bg-blue-50 rounded-xl transition-all duration-300 group"
      >
        <i
          class="ri-chat-3-line text-lg group-hover:scale-110 transition-transform duration-300"
        ></i>
        <span class="font-medium">AI Chat</span>
      </a>
      <a
        href="{% url 'home' %}#services"
        class="flex items-center gap-3 px-4 py-3 text-gray-700 hover:text-blue-600 hover:bg-blue-50 rounded-xl transition-all duration-300 group"
      >
        <i
          class="ri-stethoscope-line text-lg group-hover:scale-110 transition-transform duration-300"
        ></i>
        <span class="font-medium">Services</span>
      </a>
      <a
        href="{% url 'home' %}#awareness"
        class="flex items-center gap-3 px-4 py-3 text-gray-700 hover:text-blue-600 hover:bg-blue-50 rounded-xl transition-all duration-300 group"
      >
        <i
          class="ri-information-line text-lg group-hover:scale-110 transition-transform duration-300"
        ></i>
        <span class="font-medium">Health Awareness</span>
      </a>
      <a
        href="{% url 'home' %}#contact"
        class="flex items-center gap-3 px-4 py-3 text-gray-700 hover:text-blue-600 hover:bg-blue-50 rounded-xl transition-all duration-300 group"
      >
        <i
          class="ri-phone-line text-lg group-hover:scale-110 transition-transform duration-300"
        ></i>
        <span class="font-medium">Contact</span>
      </a>
      <!-- appointment -->
      {% if user.is_authenticated %} {% if user.is_villager %}

      <a
        href="{% url 'appointments:create' %}"
        class="flex items-center gap-3 px-4 py-3 text-gray-700 hover:text-blue-600 hover:bg-blue-50 rounded-xl transition-all duration-300 group"
      >
        <i
          class="ri-calendar-line text-lg group-hover:scale-110 transition-transform duration-300"
        ></i>
        <span class="font-medium">Book Appointments</span>
      </a>
      {% elif user.is_health_worker %}
      <a
        href="{% url 'accounts:health_worker_dashboard' %}"
        class="flex items-center gap-3 px-4 py-3 text-gray-700 hover:text-blue-600 hover:bg-blue-50 rounded-xl transition-all duration-300 group"
      >
        <i
          class="ri-dashboard-line text-lg group-hover:scale-110 transition-transform duration-300"
        ></i>
        <span class="font-medium">Dashboard</span>
      </a>
      {% endif %} {% endif %} {% if user.is_authenticated %}
      <div class="pt-3 border-t border-gray-200">
        <a
          href="{% url 'accounts:profile' %}"
          class="flex items-center gap-3 px-4 py-3 text-gray-700 hover:text-blue-600 hover:bg-blue-50 rounded-xl transition-all duration-300"
        >
          <i class="ri-user-line"></i>
          <span>Profile</span>
        </a>
        <a
          href="{% url 'chat:chat_history' %}"
          class="flex items-center gap-3 px-4 py-3 text-gray-700 hover:text-blue-600 hover:bg-blue-50 rounded-xl transition-all duration-300"
        >
          <i class="ri-history-line"></i>
          <span>Chat History</span>
        </a>

        <!-- appointment list -->
        <a
          href="{% url 'appointments:list' %}"
          class="flex items-center gap-3 px-4 py-3 text-gray-700 hover:text-blue-600 hover:bg-blue-50 rounded-xl transition-all duration-300"
        >
          <i class="ri-calendar-line"></i>
          <span>My Appointments</span>
        </a>

        <!-- enquiries list -->
        <a
          href="{% url 'contact:my_enquiries' %}"
          class="flex items-center gap-3 px-4 py-3 text-gray-700 hover:text-blue-600 hover:bg-blue-50 rounded-xl transition-all duration-300"
        >
          <i class="ri-mail-line"></i>
          <span>My Enquiries</span>
        </a>

        <form method="POST" action="{% url 'accounts:logout' %}">
          {% csrf_token %}
          <button
            type="submit"
            class="w-full flex items-center gap-3 px-4 py-3 text-gray-700 hover:text-blue-600 hover:bg-blue-50 rounded-xl transition-all duration-300"
          >
            <i class="ri-logout-box-line"></i>
            <span>Logout</span>
          </button>
        </form>
      </div>
      {% else %}
      <div class="pt-3 border-t border-gray-200">
        <a
          href="{% url 'accounts:login' %}"
          class="w-full bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white px-6 py-3 rounded-xl font-semibold shadow-lg transition-all duration-300 flex items-center justify-center gap-2"
        >
          <i class="ri-rocket-line"></i>
          <span>Get Started</span>
        </a>
      </div>
      {% endif %}
    </div>
  </div>
</nav>

<script>
  // Mobile menu toggle functionality
  document.addEventListener("DOMContentLoaded", function () {
    const mobileMenuBtn = document.getElementById("mobile-menu-btn");
    const mobileMenu = document.getElementById("mobile-menu");
    const menuIcon = mobileMenuBtn.querySelector(".mobile-menu-icon");
    const closeIcon = mobileMenuBtn.querySelector(".mobile-close-icon");

    mobileMenuBtn.addEventListener("click", function () {
      const isHidden = mobileMenu.classList.contains("hidden");

      if (isHidden) {
        mobileMenu.classList.remove("hidden");
        mobileMenu.style.animation = "slideDown 0.3s ease-out";
        menuIcon.classList.add("hidden");
        closeIcon.classList.remove("hidden");
      } else {
        mobileMenu.classList.add("hidden");
        menuIcon.classList.remove("hidden");
        closeIcon.classList.add("hidden");
      }
    });

    // Close mobile menu when clicking on a link
    const mobileLinks = mobileMenu.querySelectorAll("a");
    mobileLinks.forEach((link) => {
      link.addEventListener("click", () => {
        mobileMenu.classList.add("hidden");
        menuIcon.classList.remove("hidden");
        closeIcon.classList.add("hidden");
      });
    });
  });
</script>

<style>
  .nav-backdrop {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(20px);
    border-bottom: 1px solid rgba(229, 231, 235, 0.3);
  }

  @keyframes slideDown {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }

    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Active state for current page */
  .nav-link.active {
    color: #2563eb;
  }

  .nav-link.active .absolute {
    width: 100%;
  }
</style>
